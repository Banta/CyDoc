
<h2>Rechnung #<%=h @invoice.id %> f√ºr <%= @invoice.patient.full_name %></h2>

<% tabs = invoice_tabs %>
<% selected_tab = params[:tab] ? params[:tab].to_s : tabs.first[:name] %>

<div class="contextual">
   <%= link_to_remote "Drucken", :update => 'result', :url => {:controller => :invoices, :action => :print_patient_letter, :id => @invoice} %>
   <%= link_to_remote "PDF", :update => 'result', :url => {:controller => :invoices, :action => :patient_letter, :id => @invoice, :format => :pdf} %>
</div>

<div class="tabs">
<ul>
<% tabs.each do |tab| -%>
    <li><%= link_to tab[:label], { :tab => tab[:name] },
                                    :id => "tab-#{tab[:name]}",
                                    :class => (tab[:name] != selected_tab ? nil : 'selected'),
                                    :onclick => "showTab('#{tab[:name]}'); this.blur(); return false;" %></li>
<% end -%>
</ul>
</div>

<% tabs.each do |tab| -%>
<%= content_tag('div', render(:partial => tab[:partial]),
                       :id => "tab-content-#{tab[:name]}",
                       :style => (tab[:name] != selected_tab ? 'display:none' : nil),
                       :class => 'tab-content') %>
<% end -%>
